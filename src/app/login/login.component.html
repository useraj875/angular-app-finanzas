<!-- src/app/login/login.component.html -->
<!-- CORRECTED VERSION -->
<div class="login-page-wrapper">
  <div class="login-container">
    <div class="card shadow-sm">
      <div class="card-body p-4">

        <h2 class="card-title text-center mb-4">
          {{ modo === 'login' ? 'Iniciar Sesión' : 'Registrar Usuario' }}
        </h2>

        <form (ngSubmit)="modo === 'login' ? login() : registrar()" #loginForm="ngForm" novalidate>

          <!-- Username Input -->
          <div class="mb-3">
            <label for="nombre" class="form-label">Nombre de Usuario</label>
            <input
              type="text"
              id="nombre"
              class="form-control"
              [(ngModel)]="nombre"
              name="nombre"
              required
              #nombreInput="ngModel"
              [class.is-invalid]="nombreInput.invalid && (nombreInput.dirty || nombreInput.touched)"
              placeholder="Ingrese su nombre de usuario"
            /> <!-- Correctly closed -->
            <div *ngIf="nombreInput.invalid && (nombreInput.dirty || nombreInput.touched)" class="invalid-feedback">
              El nombre de usuario es requerido.
            </div>
          </div>

          <!-- Password Input -->
          <div class="mb-4">
            <label for="contrasena" class="form-label">Contraseña</label>
            <input
              type="password"
              id="contrasena"
              class="form-control"
              [(ngModel)]="contrasena"
              name="contrasena"
              required
              #contrasenaInput="ngModel"
              [class.is-invalid]="contrasenaInput.invalid && (contrasenaInput.dirty || contrasenaInput.touched)"
              placeholder="Ingrese su contraseña"
            /> <!-- Correctly closed -->
             <div *ngIf="contrasenaInput.invalid && (contrasenaInput.dirty || contrasenaInput.touched)" class="invalid-feedback">
              La contraseña es requerida.
            </div>
          </div>

          <!-- Submit Button -->
          <button
            type="submit"
            class="btn btn-primary w-100"
            [disabled]="loginForm.invalid"
          >
            {{ modo === 'login' ? 'Iniciar sesión' : 'Registrar' }}
          </button>

        </form>

        <!-- Error Message with Icon -->
        <div *ngIf="error" class="alert alert-danger d-flex align-items-center mt-3" role="alert">
           <i class="fa-solid fa-circle-exclamation flex-shrink-0 me-2"></i>
           <div>{{ error }}</div>
        </div>

        <!-- Success Message with Icon -->
        <div *ngIf="mensaje && modo === 'registro'" class="alert alert-success d-flex align-items-center mt-3" role="alert">
           <i class="fa-solid fa-check-circle flex-shrink-0 me-2"></i>
           <div>{{ mensaje }}</div>
        </div>

        <!-- Cleaner Separator -->
        <div class="separator my-4">
            <span>O</span>
        </div>

        <!-- Toggle Mode Button - Changed to Outline -->
        <button class="btn btn-outline-secondary w-100" (click)="alternarModo()">
          {{ modo === 'login' ? '¿No tienes cuenta? Regístrate' : '¿Ya tienes cuenta? Inicia sesión' }}
        </button>

      </div> <!-- /card-body -->
    </div> <!-- /card -->
  </div> <!-- /login-container -->
</div> <!-- /login-page-wrapper -->